<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChessdreZ Kids - ¬°Aprende Jugando!</title>
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    <link rel="stylesheet" href="kids.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="../puzzles_data.js"></script>
</head>


<body class="kids-body theme-space">
    <div class="kids-header">
        <button onclick="goBackStep()" class="btn-back">‚¨Ö VOLVER</button>
        <div class="kids-logo">üåü ChessdreZ Kids üåü</div>
        <div class="profile-area" onclick="showProfileSelector()"
            style="cursor:pointer; display:flex; align-items:center; gap:10px; background:rgba(255,255,255,0.1); padding:5px 15px; border-radius:30px;">
            <span id="current-kid-name" style="font-weight:900;">¬øQui√©n eres?</span>
            <div class="kids-stars">‚≠ê <span id="star-count">0</span></div>
        </div>
        <button onclick="showSettings()" class="btn-back"
            style="background:var(--kids-orange); padding:10px; border-radius:15px; width:45px; margin-left:10px;">‚öôÔ∏è</button>
    </div>

    <main class="kids-main">
        <div id="kids-home">
            <h1 class="kids-title">¬øA qu√© quieres jugar hoy?</h1>

            <!-- Daily Challenge Banner -->
            <div id="daily-challenge-banner" onclick="startDailyChallenge()"
                style="background: linear-gradient(45deg, var(--kids-purple), var(--kids-blue)); border-radius: 20px; padding: 20px; margin-bottom: 30px; border: 4px solid var(--kids-yellow); cursor: pointer; display: none; width: 100%; box-sizing: border-box; text-align: left; position: relative; overflow: hidden;">
                <div style="font-weight: 900; color: var(--kids-yellow); font-size: 0.8rem; letter-spacing: 1px;">‚ö° RETO
                    DEL D√çA</div>
                <div id="daily-challenge-name" style="font-size: 1.5rem; font-weight: 900; margin-top: 5px;">Cargando
                    reto...</div>
                <div style="font-size: 0.8rem; margin-top: 5px; opacity: 0.9;">¬°Consigue +150 estrellas extra hoy!</div>
                <div style="position: absolute; right: 20px; bottom: 10px; font-size: 4rem; opacity: 0.3;">üéØ</div>
            </div>

            <div class="kids-menu-grid">

                <div class="kids-card learn" onclick="showWorlds()">
                    <div class="card-icon">üìö</div>
                    <div class="card-text">ESCUELA (NIVELES)</div>
                </div>
                <div class="kids-card challenges" onclick="showPlayAI()">
                    <div class="card-icon">‚öîÔ∏è</div>
                    <div class="card-text">PARTIDA VS IA</div>
                </div>
                <div class="kids-card minigames" onclick="showMinigames()">
                    <div class="card-icon">üéÆ</div>
                    <div class="card-text">MINI-JUEGOS</div>
                </div>
                <div class="kids-card tactical" onclick="showKidsPuzzles()">
                    <div class="card-icon">üß©</div>
                    <div class="card-text">PUZZLES M√ÅGICOS</div>
                </div>
                <div class="kids-card progress" onclick="showProgress()">

                    <div class="card-icon">üèÜ</div>
                    <div class="card-text">MI PROGRESO</div>
                </div>
            </div>

            <button onclick="window.location.href='../index.html'" class="btn-exit"
                style="margin-top: 40px; padding: 15px 40px; font-size: 1.2rem;">üö™ SALIR DE LA ZONA NI√ëOS</button>
        </div>

        <!-- SETTINGS AREA -->
        <div id="kids-settings" style="display:none;">
            <h2 class="kids-title">Mis Ajustes ‚öôÔ∏è</h2>
            <div class="settings-grid">
                <div class="settings-group">
                    <h3>üîä Sonido</h3>
                    <button id="setting-sound-btn" onclick="toggleSound()" class="kids-card"
                        style="padding:20px; width:100%; border:4px solid var(--kids-green);">
                        <div style="font-size:2.5rem;" id="setting-sound-icon">üîä</div>
                        <div id="setting-sound-text" style="font-weight:900;">Sonido Activado</div>
                    </button>
                </div>

                <div class="settings-group">
                    <h3>üñºÔ∏è Color de Fondo</h3>
                    <div class="theme-options">
                        <div class="theme-btn theme-space active" onclick="changeTheme('space')"
                            style="background:radial-gradient(circle, #023e8a 0%, #03045e 100%);"></div>
                        <div class="theme-btn theme-forest" onclick="changeTheme('forest')"
                            style="background:radial-gradient(circle, #065f46 0%, #064e3b 100%);"></div>
                        <div class="theme-btn theme-ocean" onclick="changeTheme('ocean')"
                            style="background:radial-gradient(circle, #0891b2 0%, #164e63 100%);"></div>
                        <div class="theme-btn theme-candy" onclick="changeTheme('candy')"
                            style="background:radial-gradient(circle, #db2777 0%, #831843 100%);"></div>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>üè∞ Estilo de Tablero</h3>
                    <div class="theme-options">
                        <div class="theme-btn active" id="board-theme-classic" onclick="changeBoardTheme('classic')"
                            style="background:#444; border:4px solid #fff;"></div>
                        <div class="theme-btn" id="board-theme-wood" onclick="changeBoardTheme('wood')"
                            style="background:#8b4513;"></div>
                        <div class="theme-btn" id="board-theme-blue" onclick="changeBoardTheme('blue')"
                            style="background:#1e3a8a;"></div>
                        <div class="theme-btn" id="board-theme-green" onclick="changeBoardTheme('green')"
                            style="background:#14532d;"></div>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>‚ôüÔ∏è Piezas</h3>
                    <div class="theme-options">
                        <button class="piece-btn active" id="piece-theme-wikipedia"
                            onclick="changePieceTheme('wikipedia')">
                            <img src="https://chessboardjs.com/img/chesspieces/wikipedia/wP.png">
                            <span>Normal</span>
                        </button>
                        <button class="piece-btn" id="piece-theme-kids" onclick="changePieceTheme('kids')">
                            <img src="https://chessboardjs.com/img/chesspieces/wikipedia/wN.png">
                            <span>M√°gicas</span>
                        </button>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>üëâ Modo de Movimiento</h3>
                    <div class="theme-options">
                        <button class="piece-btn" id="move-method-drag" onclick="changeMoveMethod('drag')">
                            <div style="font-size:1.5rem;">üëÜ</div>
                            <span>Arrastrar</span>
                        </button>
                        <button class="piece-btn" id="move-method-click" onclick="changeMoveMethod('click')">
                            <div style="font-size:1.5rem;">üëá</div>
                            <span>Dos Clics</span>
                        </button>
                    </div>
                </div>
            </div>
            <button onclick="showHome()" class="btn-back" style="margin-top:40px; background:var(--kids-blue);">‚¨Ö VOLVER
                AL INICIO</button>
        </div>

        <!-- PROFILE SELECTOR MODAL -->
        <div id="kids-profiles"
            style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:9999; display:flex; align-items:center; justify-content:center;">
            <div class="game-container" style="max-width:500px; width:90%;">
                <h2 class="kids-title" style="font-size:2rem;">¬øQui√©n va a jugar? üëã</h2>
                <div id="profiles-list" class="kids-menu-grid"
                    style="grid-template-columns: 1fr; gap:15px; margin-bottom:20px;"></div>
                <div style="display:flex; gap:10px;">
                    <input type="text" id="new-kid-name" placeholder="Nombre del ni√±o..."
                        style="flex:1; padding:15px; border-radius:15px; border:none; font-size:1.1rem; font-weight:700;">
                    <button onclick="addNewKid()" class="btn-back"
                        style="background:var(--kids-green); box-shadow:0 4px 0 #15803d;">‚ûï</button>
                </div>
            </div>
        </div>

        <!-- LEVEL SELECTOR -->
        <div id="kids-worlds" style="display:none;">
            <h2 class="kids-title">Elige un Mundo</h2>
            <div id="worlds-container" class="kids-menu-grid"></div>
            <button onclick="showHome()" class="btn-back" style="margin-top:40px; background:var(--kids-blue);">‚¨Ö VOLVER
                AL MEN√ö</button>
        </div>

        <!-- GAME AREA (PUZZLES) -->
        <div id="kids-game" style="display:none;">
            <div class="game-container">
                <div class="game-info">
                    <h2 id="level-name" style="font-size:1.4rem; opacity:0.8;">Mundo 1</h2>
                    <div id="level-task" class="level-task"
                        style="font-size:2.2rem; min-height:80px; display:flex; align-items:center; justify-content:center; padding:10px; line-height:1.2;">
                        Mueve el pe√≥n</div>
                </div>

                <div id="kidsBoard" class="kids-board-styled"></div>

                <div class="game-footer" style="margin-top:20px; display:flex; justify-content:center; gap:15px;">
                    <button id="btn-hint" class="btn-hint">‚ùì PISTA</button>
                    <button onclick="showWorlds()" class="btn-back" style="background:var(--kids-orange);">üö©
                        RENDIRSE</button>
                </div>
            </div>
        </div>

        <!-- PLAY VS AI AREA -->
        <div id="kids-play-ai" style="display:none;">
            <div class="game-container">
                <div class="game-info">
                    <h2 id="ai-level-title" style="margin-bottom: 5px;">Nivel 0: Beb√© üë∂</h2>
                    <div id="ai-advice" class="ai-advice-bubble"
                        style="background: white; border-radius: 20px; color: #333; padding: 15px; margin-bottom: 20px; position: relative; font-weight: 700;">
                        ¬°Hola! Soy tu oponente. ¬øJugamos?</div>

                    <div class="ai-controls"
                        style="margin-bottom: 20px; display:flex; flex-wrap:wrap; gap:10px; justify-content:center;">
                        <div style="width:100%;">
                            <label style="font-weight: 900;">DIFICULTAD: </label>
                            <select id="kids-ai-depth" class="kids-select" onchange="changeAIDifficulty(this.value)"
                                style="padding: 10px; border-radius: 10px; font-weight: 900; background: var(--kids-yellow); border:none;">
                                <option value="0">Nivel 0: Beb√© üë∂ (Solo mueve)</option>
                                <option value="1">Nivel 1: Tortuga üê¢</option>
                                <option value="3">Nivel 2: Caracol üêå</option>
                                <option value="5">Nivel 3: Perrito üê∂</option>
                                <option value="8">Nivel 4: Zorro ü¶ä</option>
                            </select>
                        </div>

                        <button onclick="maestroGetHint()" class="btn-back"
                            style="background:#4ade80; color:#000; font-size:0.8rem; padding:8px 15px;">üí° ¬øQu√©
                            muevo?</button>
                        <button id="btn-toggle-autohelp" onclick="toggleAutoHelp()" class="btn-back"
                            style="background:#fbbf24; color:#000; font-size:0.8rem; padding:8px 15px;">üõ°Ô∏è Maestro:
                            SI</button>
                    </div>
                </div>
                <div id="aiBoard" class="kids-board-styled"></div>

                <div class="game-footer" style="margin-top:20px; display:flex; justify-content:center; gap:15px;">
                    <button onclick="resetKidsGame()" class="btn-back" style="background:var(--kids-green);">üîÑ NUEVA
                        PARTIDA</button>
                    <button onclick="showHome()" class="btn-back" style="background:var(--kids-orange);">üö©
                        SALIR</button>
                </div>
            </div>
        </div>

        <!-- TACTICS ARREA (PUZZLES) -->
        <div id="kids-tactics" style="display:none;">
            <div class="game-container">
                <div class="game-info">
                    <h2 style="font-size:1.8rem; color:var(--kids-purple);">üß© Puzzles M√°gicos</h2>
                    <div id="kids-puz-task" class="level-task"
                        style="font-size:1.5rem; margin-bottom:15px; background:rgba(255,255,255,0.2); border-radius:15px; padding:15px;">
                        ¬°Encuentra el mejor movimiento!
                    </div>
                </div>

                <div id="kidsPuzBoard" class="kids-board-styled"></div>

                <div class="game-footer" style="margin-top:20px; display:flex; justify-content:center; gap:15px;">
                    <button class="btn-back" style="background:var(--kids-green);" onclick="loadKidsPuzzle()">‚è©
                        SIGUIENTE</button>
                    <button onclick="showHome()" class="btn-back" style="background:var(--kids-orange);">üö©
                        SALIR</button>
                </div>
            </div>
        </div>


        <!-- MINIGAMES AREA -->
        <div id="kids-minigames" style="display:none;">
            <h2 class="kids-title">Mini-Juegos üéÆ</h2>
            <div class="kids-menu-grid">
                <div class="kids-card" onclick="startPawnRace()"
                    style="border:8px solid var(--kids-green); box-shadow:0 10px 0 var(--kids-green);">
                    <div class="card-icon">‚ôüÔ∏è</div>
                    <div class="card-text">Carrera de Peones</div>
                    <p style="font-size:0.8rem; margin-top:10px; font-weight:bold;">¬°S√© el primero en llegar al final!
                    </p>
                </div>
                <div class="kids-card" onclick="startKingMaze()"
                    style="border:8px solid var(--kids-purple); box-shadow:0 10px 0 var(--kids-purple);">
                    <div class="card-icon">üåÄ</div>
                    <div class="card-text">Rey al Centro</div>
                    <p style="font-size:0.8rem; margin-top:10px; font-weight:bold;">¬°Lleva a tu Rey a las casillas
                        m√°gicas!</p>
                </div>
            </div>
            <button onclick="showHome()" class="btn-back" style="margin-top:40px; background:var(--kids-blue);">‚¨Ö VOLVER
                AL INICIO</button>
        </div>

        <!-- PROGRESS AREA -->
        <div id="kids-progress" style="display:none;">
            <h2 class="kids-title">Mis Logros üèÜ</h2>
            <div class="game-container" style="max-width:600px; padding:40px;">
                <div id="progress-stats"
                    style="color:white; font-size:1.5rem; text-align:center; width:100%; font-weight:900;">
                    <!-- Populated by JS -->
                </div>
                <div style="margin-top:30px; display:grid; grid-template-columns:1fr 1fr; gap:20px; width:100%;">
                    <div class="kids-card" style="padding:20px; border:4px solid var(--kids-yellow);">
                        <div style="font-size:2rem;">‚≠ê</div>
                        <div id="stat-stars">0</div>
                        <div style="font-size:0.7rem;">ESTRELLAS</div>
                    </div>
                    <div class="kids-card" style="padding:20px; border:4px solid var(--kids-green);">
                        <div style="font-size:2rem;">üîì</div>
                        <div id="stat-worlds">1</div>
                        <div style="font-size:0.7rem;">MUNDOS</div>
                    </div>
                </div>
            </div>
            <button onclick="showHome()" class="btn-back" style="margin-top:40px; background:var(--kids-blue);">‚¨Ö VOLVER
                AL INICIO</button>
        </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="kids_levels.js"></script>
    <script src="kids.js"></script>
</body>

</html>